//// Defaults

// Padding defaults
$nav-padding: 0.75ex !default
$nav-padding-ratio: 2.5 !default
$nav-padding-y: $nav-padding !default
$nav-padding-x: $nav-padding-y * $nav-padding-ratio !default

// Color defaults
$nav-color: transparent !default
$nav-text-color: black
$nav-menu-color: black !default
$nav-menu-top-color: $nav-menu-color !default
$nav-menu-top-text-color: $nav-text-color !default
$nav-highlight-color: $brand-color !default
$nav-highlight-text-color: #fff !default

// Icons
$nav-icon-opacity: 0.5 !default
$nav-icon-menu: "≡" !default
$nav-icon-right: "⯈" !default
$nav-icon-down: "▾" !default



// Animation timing defaults
$nav-animation: 150ms !default
$nav-menu-animation: $nav-animation * 1!default
$nav-mobile-menu-animation: all 300ms ease-in-out

// These should be set in theme.scss/theme.sass or minima already...
// but just in case, we're defining fallbacks here
$on-palm: 600px !default
$on-laptop: 800px !default

// Responsive breakpoint
$nav-min-width: $on-laptop !default

// Mobile menu colors
$nav-mobile-text: white !default
$nav-mobile-text-shadow: 1px 1px 0 darken($brand-color, 30%) !default
$nav-mobile-menu: darken($brand-color, 20%) !default
$nav-mobile-menu-highlight: mix($nav-mobile-menu, $nav-mobile-text, 80%) !default
$nav-mobile-button-size: 32px !default


// Native iOS or Android fonts when installed, else use website fonts
$nav-mobile-font-family: -apple-system-font, "Roboto", "Droid Sans", $base-font-family !default

@media screen and (min-width: $nav-min-width + 1)
  nav.menu
    position: relative
    z-index: 100
    cursor: default
  


    // Cleafix hack to make nav act more like block
    // without having to set an overflow property
    // (which would hide menus)
    &::after
      content: ""
      display: table
      clear: both

    // Remove list styles
    ul, li
      transition: all $nav-animation
      list-style: none


    a, span
      transition: all $nav-menu-animation
      display: block
      color: $nav-text-color !important
      padding: $nav-padding-y $nav-padding-x
      text-decoration: none !important

    ul
      background: $nav-color
    

      ul
        position: absolute
        left: 0
        top: 100%
        visibility: hidden
        opacity: 0
       
    li
      float: left
      position: relative

      > ul
        transform: scaleY(0)
        transform-origin: top left

        ul
          transform: scale(0)

      &:hover
        background: goldenrod

        li
          background: $nav-menu-color

        > ul
          // Activate the immediate submenu
          visibility: visible
          opacity: 1
          // Make sure menus are on top (z-index is relative to parent z-index)
          z-index: 1
          transform: scale(1)

          
          li:last-child a, span
            margin-bottom: #{$nav-padding-y * -4}
            padding-bottom: #{$nav-padding-y * 5}

    
  

   

@media screen and (max-width: $nav-min-width)
  nav
    font-family: $nav-mobile-font-family
    z-index: 1000
    cursor: default

    ul, li
      padding: 0
      margin: 0
      list-style: none

    li.active
      background-color: $nav-mobile-menu-highlight


  nav > .nav-screen
    transition: $nav-mobile-menu-animation
    opacity: 0

  .nav-toggle:before
    transition: $nav-mobile-menu-animation
    display: block
    width: $nav-mobile-button-size
    height: $nav-mobile-button-size
    cursor: pointer
    content: $nav-icon-menu
    font-size: $nav-mobile-button-size
    color: $nav-text-color
    background: $nav-menu-color
    z-index: 3
    position: fixed
    top: 0
    left: 0
    padding: 0.5ex
    line-height: $nav-mobile-button-size


//// Make the masthead a menu
// It's also possible to extend nav.menu for other nav elements
// ...or make nav elements with a class of menu in document bodies too
.masthead 
  @extend nav,.menu

  